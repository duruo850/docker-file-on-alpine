version: "3"
services:
    consul1:
        image: "duruo850/cosule:1.3.0_alpine3.8"
        container_name: "consul1"
        hostname: "consul1"
        ports:
            - "8300-8302:8300-8302"
            - "8301-8302:8301-8302/udp"
            - "8400:8400"
            - "8500:8500"
            - "8600:53"
        command: " -server -bootstrap-expect 3"
    consul2:
        image: "duruo850/cosule:1.3.0_alpine3.8"
        container_name: "consul2"
        hostname: "consul2"
        ports:
            - "9300-9302:8300-8302"
            - "9301-9302:8301-8302/udp"
            - "9400:8400"
            - "9500:8500"
            - "9600:53"
        links:
            - "consul1:consul1"
        command: " -server -join consul1"
    consul3:
        image: "duruo850/cosule:1.3.0_alpine3.8"
        container_name: "consul3"
        hostname: "consul3"
        ports:
            - "10300-10302:8300-8302"
            - "10301-10302:8301-8302/udp"
            - "10400:8400"
            - "10500:8500"
            - "10600:53"
        links:
            - "consul1:consul1"
        command: " -server -join consul1"